<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Simon</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide">

  <style>
    body {
  text-align: center;
  background: rgb(4,4,59);
background: linear-gradient(90deg, rgb(3, 3, 18) 0%, rgba(78,78,125,1) 35%, rgb(5, 18, 36) 100%);
}

#level-title {
  font-family: 'Audiowide';
  font-size: 3rem;
  margin:  5%;
  background: rgb(63, 71, 15);
  background: linear-gradient(90deg, rgba(63, 71, 15, 1) 0%, rgba(242, 255, 17, 1) 35%, rgba(109, 112, 86, 1) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;}
.container {
  display: block;
  width: 50%;
  margin: auto;

}

.btn {
  margin: 10px;
  display: inline-block;
  height: 200px;
  width: 200px;
  border: 10px solid black;
  
}  

.game-over {
  background-color: red;
  opacity: 0.8;
}

.red {
  background: radial-gradient(circle at 0.2% 1.8%, rgb(255, 90, 8) 0%, rgb(88, 0, 0) 100.2%);  border-radius: 100px / 120px 10px;
}

.green {
  background: linear-gradient(110.1deg, rgb(34, 126, 34) 2.9%, rgb(168, 251, 60) 90.3%);
  border-radius: 10px 100px / 120px;
}

.blue {
  background: linear-gradient(89deg, rgb(21, 74, 189) 0.1%, rgb(28, 126, 192) 51.5%, rgb(137, 208, 245) 100.2%);
  border-radius: 10px 100px / 120px;
}

.yellow {
  background: radial-gradient(circle at 3.1% 8.2%, rgba(242, 222, 5, 0.929) 0%, #ececa5 98.2%); 
  border-radius: 100px / 120px 10px;
}

.pressed {
  box-shadow: 0 0 20px white;
  background-color: grey;
} 

.menu-icon {
  padding: 5px 10px !important; 
  background-color:#FFFF00;
  color: black;
  border: black;
  border-radius: 50px;
  cursor: pointer;
  width: auto;
  display: inline-block;
  position: absolute; 
  top: 10px; 
  left: 10px; 
  z-index: 999; 
  box-sizing: border-box;
}

.menu {
  display: none;
  position: absolute;
  top: 10px;
  left: 50px;
  padding: 10px;
  background-color: #444;

}

.menu ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.menu li {
  cursor: pointer;
  color: white;
  margin-bottom: 10px;
}

.game-description-popup,
.game-rules-popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 20px;
  background-color: #fff;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  border : 8px solid #FFD300;
}
.ok-button {
  padding: 10px 20px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.ok-button:hover {
  background-color: #45a049;
}

.ok-button:active {
  background-color: #3e8e41;
}


  </style>
</head>

<body>
  <div class="menu-icon" onclick="toggleMenu()" style="font-size: 20px; font-weight:bolder;"><b>?</b></div>
  <div class="menu">
    <ul>
      <li onclick="showGameDescription()" style="background: #FFF200; border-radius: 3px; color: black; width:150px">Game Description</li>
      <li onclick="showGameRules()" style="background: #FFF200; border-radius: 3px; color: black; width:150px">Rules</li>
    </ul>
  </div>

  <h1 id="level-title">Press A Key to Start</h1>

  <div class="container">
    <div class="row">

      <div type="button" id="green" class="btn green">

      </div>

      <div type="button" id="red" class="btn red">

      </div>
    </div>

    <div class="row">

      <div type="button" id="yellow" class="btn yellow">

      </div>
      <div type="button" id="blue" class="btn blue">

      </div>

    </div>

  </div>
   <div class="game-description-popup" id="gameDescriptionPopup">
    <!-- Game Description content goes here -->
    <p style="font-weight: bold;">Simon is a memory game where you need to remember the sequence of colors that Simon displays and repeat it back correctly.</p>
     <button class="ok-button" onclick="closeGameDescription()">OK</button>
  </div>
  <div class="game-rules-popup" id="gameRulesPopup">
    <!-- Game Rules content goes here -->
    <ul style=" list-style-type: none">
      <li style="font-weight: bold;">Simon will play a sequence of colors by flashing them one by one.</li>
      <li style="font-weight: bold;">You need to remember the sequence and repeat it back by clicking the buttons in the same order.</li>
      <li style="font-weight: bold;">If you make a mistake, the game will end, and you'll have to start over.</li>
      <li style="font-weight: bold;">Each time you complete a level, Simon will add one more color to the sequence, making the game progressively harder.</li>
    </ul>
    <button class="ok-button" onclick="closeGameRules()">OK</button>
  </div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
<script>
var buttonColors = ["red", "blue", "green", "yellow"];
var gamePattern = [];
var randomNumber;
var userClickedPattern = [];
var started = false;
var level = 0;

function flash(color) {
  $("#" + color).fadeOut(250).fadeIn(250);
  playSound(color);
}

function playSound(color) {
  var audio = new Audio("sounds/" + color + ".mp3");
  audio.play();
}

function newSequence() {
  userClickedPattern = []; // Reset the user's clicked pattern
  level++;
  $("#level-title").text("Level " + level);
  randomNumber = Math.floor(Math.random() * 4);
  var randomChosenColor = buttonColors[randomNumber];
  gamePattern.push(randomChosenColor);
  flash(randomChosenColor);
}

function checkAnswer(currentLevel) {
  if (userClickedPattern[currentLevel] === gamePattern[currentLevel]) {
    console.log("Correct!");
    if (userClickedPattern.length === gamePattern.length) {
      // User has completed the current level
      setTimeout(function () {
        newSequence();
      }, 1000);
    }
  } else {
    console.log("Wrong answer!");
    var wrong = new Audio("sounds/wrong.mp3");
    wrong.play();
    
    $('body').css('background', 'red');
setTimeout(function() {
  $('body').css('background', 'linear-gradient(90deg, rgba(4,4,59,1) 0%, rgba(78,78,125,1) 35%, rgba(12,32,63,1) 100%)');
}, 150);

    

    $("body").addClass("game-over");
    setTimeout(function () {
      $("body").removeClass("game-over");
    }, 200);
    $("#level-title").text("Game Over ! Press Any Key to Restart.");
    started = false;
    gamePattern = [];
    level = 0;
  }
}

$(document).keypress(function (event) {
  if (!started) {
    started = true;
    newSequence();
  }
});

$(".btn").click(function () {
  var userChosenColor = $(this).attr("id");
  userClickedPattern.push(userChosenColor);
  flash(userChosenColor);
  playSound(userChosenColor);
  checkAnswer(userClickedPattern.length - 1);
});

function toggleMenu() {
  var menu = document.querySelector('.menu');
  menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
}

function showGameDescription() {
  var popup = document.getElementById('gameDescriptionPopup');
  popup.style.display = 'block';
}

function showGameRules() {
  var popup = document.getElementById('gameRulesPopup');
  popup.style.display = 'block';
}

function closeGameDescription() {
  var popup = document.getElementById('gameDescriptionPopup');
  popup.style.display = 'none';
}

function closeGameRules() {
  var popup = document.getElementById('gameRulesPopup');
  popup.style.display = 'none';
}
</script>
</body>

</html>
